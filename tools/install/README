Installation tools
==================

This document describes how to create the various packages for lazarus
including the required freepascal packages (fpc and fpcsrc).

--------------------------------------------------------------------------------
TGZ

Creating the fpcsrc tgz:

  There are two ways to do it and so there are two scripts. The first downloads
  the fpc cvs and packs it. The second uses an existing fpc cvs directory,
  copies it, remove unnecessary files and packs it. The second script is
  therefore much faster, but it may miss removing every old, unnecessary files.
  
  The download and pack script:
  The script create_fpc_export_tgz.sh makes a cvs export of the fpc.
  
  For 1.0.7: ./create_fpc_export_tgz.sh stable 03/01/03

  For 1.1: ./create_fpc_export_tgz.sh devel 12/25/02

  The copy and pack script:
  The script create_fpc_tgz_from_local_dir.sh needs as parameter the fpc cvs
  directory and compress it to a tgz. For example
  ./create_fpc_tgz_from_local_dir.sh ~/pascal/fpc fpc-1.0.7.tgz


Creating the lazarus tgz:

  There are two ways to do it and so there are two scripts. The first downloads
  the fpc cvs and packs it. The second uses an existing fpc cvs directory,
  copies it, remove unnecessary files and packs it. The second script is
  therefore much faster, but it may miss removing all old, unnecessary files.

  The download and pack script:
  The script create_lazarus_export_tgz.sh makes a cvs export of lazarus and
  compress it. For example:
  ./create_lazarus_export_tgz.sh lazarus-20030316.tgz
  
  The copy and pack script:
  The script create_lazarus_tgz_from_local_dir.sh needs as parameter the
  lazarus cvs directory and compress it to lazarus-0.8.5.tgz.

--------------------------------------------------------------------------------

RPM:

Creating the fpc and the fpcsrc rpm:

  There are two versions of the compiler: the stable 1.0.7 and the unstable
  developer version 1.1. To build them, you must install fpc first. Install the
  latest fpc package you can get. Note: The 1.0.7 can not be built with a 1.1
  compiler.
  The create_fpc_rpm.sh works nearly automatically. Become root and execute it.
  For 1.0.7: ./create_fpc_rpm.sh stable
  For 1.1:   ./create_fpc_rpm.sh devel

  What it does: First it checks if the fpc source tgz is already created and
  if not, it automatically downloads it. The script does not use the current
  version, but the latest known to work with lazarus. Then it unpacks the
  source, compiles it and builds the rpm. Normally you can find the rpms under
  /usr/src/redhat/RPMS/i386/ and /usr/src/redhat/SRPMS/.


Creating the lazarus rpm:

  Important:
  If you have created a new fpc RPM, then you should install it, *before* you
  build the lazarus RPM. Otherwise the compiled lazarus RPM is not compatible
  to the fpc RPM.

  As root:
  Execute create_lazarus_rpm.sh.


Creating other system specific rpms:

  rpm --rebuild lazarus-0.8.5-1.src.rpm


--------------------------------------------------------------------------------

Debian:

Creating the debian fpc packages:


  You need the debhelper, tetex-bin, tetex-extra, awk, dvipdfm, latex2html
  packages.
  See install/debian/README.debian for changing /etc/texmf/texmf.cnf.
  Install the latest fpc package you can get. You will need it to compile the
  compiler itself. Then download the fpc cvs of the FIXES_1_0_0 branch and
  compile the RTL and the compiler with 'make rtl' and 'make compiler'.
  The deb packages are created with 'make deb'. This will create a lot of debs
  in /usr/src. The lazarus debs are created by changing the version in
  Makefile.fpc, Makefile and prepending a message to install/debian/changelog.


Creating the debian fpcsrc package:

  You need the fakeroot package.
  Create the fpcsrc-1.0.7.tgz of 'Creating the fpcsrc tgz' and put it into
  tools/install. If you have no permissions for that, just copy the directory
  somewhere (e.g. cp -R <lazarusdir>/tools/install /tmp/fpcsrc).
  Then cd into the tools/install directory and execute the script
  create_fpcsrc_deb.sh. It will create /tmp/fpcsrc_temp/ and will build the
  deb there.
  
  
Creating the debian lazarus package:

  You need the X11 package:
  Create the lazarus-0.8.5.tgz of 'Creating the lazarus tgz' and put it into
  tools/install. If you have no permissions for that, just copy the directory
  somewhere (e.g. cp -R <lazarusdir>/tools/install /tmp/lazarus).
  Then cd into the tools/install directory and execute the script
  create_lazarus_deb.sh. It will create /tmp/lazarus_temp/ and will build the
  deb there.
  
